import{r as i,j as e,P as s,R as N,L as m,u as g}from"./index-CX5ohf2I.js";const u=({isOpen:t,onClose:n,title:r,children:l,actions:a})=>(i.useEffect(()=>{const d=x=>{x.key==="Escape"&&(n==null||n())};return t&&document.addEventListener("keydown",d),()=>document.removeEventListener("keydown",d)},[t,n]),t?e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm animate-fade-in",onClick:n}),e.jsx("div",{className:"relative z-10 w-full max-w-md mx-4 animate-slide-up",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl border border-gray-100",children:[e.jsxs("div",{className:"px-6 pt-6",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:r}),e.jsx("button",{onClick:n,className:"p-2 rounded-lg text-gray-500 hover:bg-gray-100 transition","aria-label":"Close modal",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"mt-4 text-gray-600",children:l})]}),a&&e.jsx("div",{className:"px-6 py-4 bg-gray-50 rounded-b-2xl flex justify-end gap-3",children:a})]})})]}):null);u.propTypes={isOpen:s.bool.isRequired,onClose:s.func,title:s.node,children:s.node,actions:s.node};const p=({note:t,onRequestDelete:n,formatDate:r})=>{var a;const l=i.useCallback(()=>n(t),[t,n]);return e.jsxs("div",{className:"card p-6 hover:shadow-xl transition-shadow will-change-transform",children:[e.jsxs("div",{className:"flex justify-between items-start gap-3",children:[e.jsx("h3",{className:"text-lg font-semibold line-clamp-2",children:((a=t.title)==null?void 0:a.trim())||"Untitled Note"}),e.jsxs("div",{className:"flex items-center gap-1 ml-2",children:[e.jsx(m,{to:`/edit/${t.id}`,className:"icon-btn",title:"Edit note",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),e.jsx("button",{onClick:l,className:"icon-btn",title:"Delete note",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),t.content?e.jsxs("p",{className:"text-gray-600 text-sm mt-2 line-clamp-3",children:[t.content.slice(0,200),t.content.length>200&&"â€¦"]}):e.jsx("p",{className:"text-gray-400 text-sm mt-2 italic",children:"No content"}),e.jsxs("div",{className:"mt-4 flex items-center justify-between text-xs text-gray-500",children:[t.createdAt&&e.jsxs("span",{children:["Created: ",r(t.createdAt)]}),t.updatedAt&&t.updatedAt!==t.createdAt&&e.jsxs("span",{children:["Updated: ",r(t.updatedAt)]})]}),e.jsxs("div",{className:"mt-5 flex gap-2",children:[e.jsx(m,{to:`/note/${t.id}`,className:"btn-secondary flex-1 text-center text-sm",children:"View"}),e.jsx(m,{to:`/share/${t.id}`,className:"btn-primary flex-1 text-center text-sm",children:"Share"})]})]})};p.propTypes={note:s.shape({id:s.oneOfType([s.string,s.number]).isRequired,title:s.string,content:s.string,createdAt:s.oneOfType([s.string,s.number,s.instanceOf(Date)]),updatedAt:s.oneOfType([s.string,s.number,s.instanceOf(Date)])}).isRequired,onRequestDelete:s.func.isRequired,formatDate:s.func.isRequired};const y=N.memo(p),k=()=>{var h;const{notes:t,loading:n,error:r,deleteNote:l}=g(),[a,d]=i.useState({open:!1,note:null}),x=i.useCallback(c=>d({open:!0,note:c}),[]),o=i.useCallback(()=>d({open:!1,note:null}),[]),j=i.useCallback(async()=>{if(a.note)try{await l(a.note.id)}finally{o()}},[a.note,l,o]),f=i.useCallback(c=>new Date(c).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),[]);return n?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-2 border-primary-200 border-t-primary-600"})}):r?e.jsxs("div",{className:"max-w-md mx-auto text-center py-16",children:[e.jsx("p",{className:"text-red-600 font-medium",children:r}),e.jsx("button",{onClick:window.location.reload,className:"btn-secondary mt-4",children:"Retry"})]}):t.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"mx-auto w-16 h-16 rounded-2xl grid place-items-center bg-white shadow mb-4",children:e.jsx("svg",{className:"w-7 h-7 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),e.jsx("h2",{className:"text-2xl font-semibold",children:"No notes yet"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Create your first note to get started."}),e.jsx(m,{to:"/new",className:"btn-primary mt-6 inline-flex",children:"Create Note"})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"Your Notes"}),e.jsxs("span",{className:"text-sm text-gray-500",children:[t.length," note",t.length!==1?"s":""]})]}),e.jsx("div",{className:"grid gap-6 sm:grid-cols-2 lg:grid-cols-3",children:t.map(c=>e.jsx(y,{note:c,onRequestDelete:x,formatDate:f},c.id))}),e.jsx(u,{isOpen:a.open,onClose:o,title:"Delete note?",actions:e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:o,className:"btn-secondary text-sm",children:"Cancel"}),e.jsx("button",{onClick:j,className:"btn-danger text-sm",children:"Delete"})]}),children:e.jsxs("p",{children:["Are you sure you want to delete ",e.jsx("span",{className:"font-medium",children:((h=a.note)==null?void 0:h.title)||"this note"}),"? This action cannot be undone."]})})]})};export{k as default};
