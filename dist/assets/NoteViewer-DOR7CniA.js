import{a as b,b as g,u as y,r as i,j as e,L as o,z as x,P as f}from"./index-CX5ohf2I.js";const k=({isShared:t=!1})=>{const{id:a}=b();g();const{getNoteById:h,getSharedNote:u,loading:p,error:l}=y(),[s,j]=i.useState(null),[n,N]=i.useState("");i.useEffect(()=>{a&&v()},[a]);const v=async()=>{try{const r=t?await u(a):await h(a);if(j(r),!t){const m=window.location.origin;N(`${m}/share/${a}`)}}catch(r){console.error("Error loading note:",r)}},c=async()=>{try{await navigator.clipboard.writeText(n),x.success("Share link copied to clipboard!")}catch(r){console.error("Error copying to clipboard:",r),x.error("Failed to copy share link")}},d=r=>new Date(r).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});return p?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):l?e.jsxs("div",{className:"text-center py-12",children:[e.jsxs("div",{className:"text-red-600 mb-4",children:[e.jsx("svg",{className:"w-16 h-16 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("p",{className:"text-lg font-medium",children:"Error loading note"}),e.jsx("p",{className:"text-sm text-gray-600",children:l})]}),!t&&e.jsx(o,{to:"/",className:"btn-primary mt-4",children:"Back to Notes"})]}):s?e.jsxs("div",{className:"max-w-4xl mx-auto",children:[t&&e.jsx("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 text-blue-400 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("p",{className:"text-blue-800 text-sm",children:"This is a shared note. You can view it but cannot edit it."})]})}),e.jsxs("div",{className:"card p-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:s.title||"Untitled Note"}),!t&&e.jsxs("div",{className:"flex space-x-2 ml-4",children:[e.jsxs(o,{to:`/edit/${s.id}`,className:"btn-secondary text-sm",children:[e.jsx("svg",{className:"w-4 h-4 inline mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Edit"]}),e.jsxs("button",{onClick:c,className:"btn-primary text-sm",children:[e.jsx("svg",{className:"w-4 h-4 inline mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"})}),"Share"]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-gray-500",children:[e.jsxs("span",{children:["Created: ",d(s.createdAt)]}),s.updatedAt!==s.createdAt&&e.jsxs("span",{children:["Updated: ",d(s.updatedAt)]})]})]}),e.jsx("div",{className:"prose max-w-none",children:e.jsx("div",{className:"whitespace-pre-wrap text-gray-800 leading-relaxed",children:s.content||"No content available."})})]}),!t&&n&&e.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Share this note"}),e.jsxs("div",{className:"flex",children:[e.jsx("input",{type:"text",value:n,readOnly:!0,className:"flex-1 px-3 py-2 border border-gray-300 rounded-l-lg bg-white text-sm"}),e.jsx("button",{onClick:c,className:"px-4 py-2 bg-primary-600 text-white rounded-r-lg hover:bg-primary-700 transition-colors duration-200 text-sm",children:"Copy"})]})]}),e.jsx("div",{className:"mt-8 flex justify-start",children:e.jsxs(o,{to:"/",className:"btn-secondary",children:[e.jsx("svg",{className:"w-4 h-4 inline mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),t?"Back to Home":"Back to Notes"]})})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsxs("div",{className:"text-gray-400 mb-4",children:[e.jsx("svg",{className:"w-16 h-16 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("p",{className:"text-lg font-medium text-gray-600",children:"Note not found"})]}),!t&&e.jsx(o,{to:"/",className:"btn-primary mt-4",children:"Back to Notes"})]})};k.propTypes={isShared:f.bool};export{k as default};
