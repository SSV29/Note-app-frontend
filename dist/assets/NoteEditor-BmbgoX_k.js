import{a as v,b as w,u as C,r as l,j as e}from"./index-CX5ohf2I.js";const E=()=>{const{id:n}=v(),i=w(),{createNote:u,updateNote:h,getNoteById:N,loading:p,error:c}=C(),[t,d]=l.useState({title:"",content:""}),[r,m]=l.useState(!1),s=!!n;l.useEffect(()=>{s&&n&&b()},[n,s]);const b=async()=>{try{const a=await N(n);d({title:a.title||"",content:a.content||""})}catch(a){console.error("Error loading note:",a)}},x=a=>{const{name:o,value:y}=a.target;d(g=>({...g,[o]:y}))},j=async a=>{if(a.preventDefault(),!t.title.trim()&&!t.content.trim()){alert("Please add a title or content to save the note.");return}m(!0);try{s?await h(n,t):await u(t),i("/")}catch(o){console.error("Error saving note:",o)}finally{m(!1)}},f=()=>{i("/")};return p&&s?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:s?"Edit Note":"Create New Note"}),e.jsx("p",{className:"text-gray-600 mt-2",children:s?"Update your note below":"Write your note below"})]}),c&&e.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:e.jsxs("div",{className:"flex",children:[e.jsx("svg",{className:"w-5 h-5 text-red-400 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("p",{className:"text-red-800",children:c})]})}),e.jsxs("form",{onSubmit:j,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-2",children:"Title"}),e.jsx("input",{type:"text",id:"title",name:"title",value:t.title,onChange:x,placeholder:"Enter note title...",className:"input-field",autoFocus:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"content",className:"block text-sm font-medium text-gray-700 mb-2",children:"Content"}),e.jsx("textarea",{id:"content",name:"content",value:t.content,onChange:x,placeholder:"Write your note content here...",rows:15,className:"input-field resize-none"})]}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx("button",{type:"button",onClick:f,className:"btn-secondary",disabled:r,children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn-primary",disabled:r||!t.title.trim()&&!t.content.trim(),children:r?e.jsxs("div",{className:"flex items-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),s?"Updating...":"Creating..."]}):s?"Update Note":"Create Note"})]})]})]})};export{E as default};
